it('{{ testDescription }}', function () {
    $mockClient = new MockClient([
        {{ requestClass }}::class => MockResponse::make(status: {{ responseStatus }}),
    ]);

{{ modelSetup }}
    $response = $this->{{ clientName }}
        ->withMockClient($mockClient)
        ->{{ resourceName }}()
        ->{{ methodName }}({{ methodArguments }});

    // Assert request was sent
    $mockClient->assertSent({{ requestClass }}::class);

    // Validate JSON:API body structure
    $mockClient->assertSent(function (Request $request) {
        $body = $request->body()->all();

        // Check JSON:API structure
        if (!isset($body['data'])) {
            return false;
        }

        $data = $body['data'];

        // Validate required JSON:API fields
        if (!isset($data['type']) || !isset($data['attributes'])) {
            return false;
        }

{{ bodyAssertions }}
        return true;
    });

    expect($response->status())->toBe({{ responseStatus }});
});
